<html>
<head>
  <title>massive chat</title>
	<script src="/socket.io/socket.io.js"></script>
	<script>
		var socket = io.connect();
		
		socket.on('test', function (data) {
			var formattedMessage = data.details + '<br/>' + document.getElementById('divMessage').innerHTML;
			document.getElementById('divMessage').innerHTML = formattedMessage;
		});
	  
		function putMessage() {
			var txtNick = document.getElementById('txtNick');
			var txtMessage = document.getElementById('txtMessage');
			socket.emit('putMessage', { nick: txtNick.value , message: txtMessage.value });
			txtMessage.value = '';
			txtMessage.focus();
		}
	</script>
</head>
<body>
	<h1>massive chat [node.js + socket.io]</h1>
  <p>
    <a href="/"><< back to experiments</a>
  </p>
	nickname: <input type="text" id="txtNick" /><br/>
	message: <input type="text" id="txtMessage" />
	<input type="submit" value="send" onclick="putMessage();">
	<div id="divMessage" style="width:400px; height:400px; border: solid 1px; overflow: auto;"></div>
</body>
</html>
